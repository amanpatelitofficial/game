<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DevOps Crossword Game - 4 Teams</title>
<style>
  body {
    background: linear-gradient(135deg, #0d0d0d, #1e1e1e);
    color: #f5f5f5;
    font-family: 'Segoe UI', sans-serif;
    text-align: center;
    padding: 20px;
  }
  h1 {
    color: #ff9800;
    margin-bottom: 10px;
    text-shadow: 0 0 10px #ff9800;
  }
  #scoreboard {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 25px;
  }
  .score {
    background: #1c1c1c;
    padding: 10px 20px;
    border-radius: 12px;
    font-weight: bold;
    box-shadow: 0 0 12px rgba(0,0,0,0.6);
    transition: transform 0.2s;
  }
  .score:hover { transform: scale(1.05); }
  .score span {
    color: #03a9f4;
  }
  .container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
    justify-items: center;
  }
  .team {
    border: 2px solid #444;
    border-radius: 15px;
    padding: 15px;
    width: 480px;
    background: #1c1c1c;
    box-shadow: 0 0 20px rgba(255, 152, 0, 0.2);
    transition: transform 0.3s;
  }
  .team:hover { transform: scale(1.02); }
  .team h2 {
    color: #03a9f4;
    margin-bottom: 5px;
    text-shadow: 0 0 6px #03a9f4;
  }
  .timer {
    font-size: 16px;
    margin-bottom: 10px;
    color: #ff5252;
    font-weight: bold;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(12, 30px);
    grid-template-rows: repeat(12, 30px);
    gap: 2px;
    margin: 10px auto;
    user-select: none;
  }
  .cell {
    width: 30px; height: 30px;
    background: #222;
    display: flex; align-items: center; justify-content: center;
    font-size: 14px; border: 1px solid #333;
    cursor: pointer;
    transition: background 0.2s, transform 0.1s;
  }
  .cell:hover { background: #333; transform: scale(1.1); }
  .selected { background: #ff9800 !important; color:#000; }
  .found { background: #4caf50 !important; color:white; }
  .questions {
    text-align: left;
    margin-top: 10px;
  }
  .questions div {
    margin: 3px 0;
    padding: 5px;
    background: #2a2a2a;
    border-radius: 6px;
    font-size: 13px;
    transition: background 0.3s;
  }
  .questions div:hover { background:#3a3a3a; }
  .done { text-decoration: line-through; color:#4caf50; font-weight: bold; }
  .timeup {
    color: #ff1744;
    font-size: 18px;
    font-weight: bold;
    margin-top: 8px;
  }
  .disabled .cell { pointer-events: none; opacity: 0.4; }
</style>
</head>
<body>
<h1>⚡ DevOps Crossword Game ⚡</h1>

<!-- Scoreboard -->
<div id="scoreboard"></div>

<div class="container" id="gameContainer"></div>

<script>
const teamData = [
  {
    name:"Team 1",
    words:["JENKINS","DOCKER","ANSIBLE","PROMETHEUS","KUBERNETES","GRAFANA","NAGIOS","ARGOCD","ELK","HELM"],
    questions:[
      "CI/CD automation tool?","Container runtime tool?","Popular config mgmt tool?","Monitoring system?",
      "Container orchestration tool?","Visualization dashboard?","Legacy monitoring tool?",
      "GitOps tool?","Log management stack?","Kubernetes package manager?"
    ],
    score:0
  },
  {
    name:"Team 2",
    words:["GIT","TERRAFORM","CIRCLECI","CHEF","PUPPET","SPINNAKER","NEWRELIC","DATADOG","FLUENTD","SALTSTACK"],
    questions:[
      "Version control system?","IaC tool by HashiCorp?","Another CI/CD tool?","Ruby-based config mgmt tool?",
      "Declarative config mgmt tool?","Multi-cloud CD platform?","APM tool?",
      "Cloud monitoring service?","Log forwarding agent?","Python-based config mgmt tool?"
    ],
    score:0
  },
  {
    name:"Team 3",
    words:["TERRAFORM","HELM","NAGIOS","ISTIO","SPINNAKER","CHEF","PUPPET","PROMETHEUS","DATADOG","LOGSTASH"],
    questions:[
      "IaC tool by HashiCorp?","Kubernetes package manager?","Legacy monitoring/alerting system?",
      "Service mesh for Kubernetes?","Continuous delivery multi-cloud platform?","Ruby-based config mgmt tool?",
      "Declarative config mgmt tool?","Open-source monitoring tool?","Observability stack vendor?","Log processing pipeline tool?"
    ],
    score:0
  },
  {
    name:"Team 4",
    words:["CLOUDFORMATION","EKS","CLOUDWATCH","LAMBDA","ATHENA","STEPFUNCTIONS","SNS","SQS","CODEPIPELINE","CODEBUILD"],
    questions:[
      "AWS IaC service?","AWS managed Kubernetes service?","AWS monitoring/logging service?","AWS serverless compute?",
      "Query service for S3?","Serverless workflow orchestrator?","AWS pub/sub messaging?",
      "AWS message queue service?","AWS CI/CD service?","AWS build service?"
    ],
    score:0
  }
];

// ---- Grid Generator ----
function generateGrid(words, size=12){
  let grid = Array.from({length:size},()=>Array(size).fill(null));

  function tryPlace(word){
    word=word.toUpperCase();
    for(let attempt=0;attempt<100;attempt++){
      let dir=Math.random()<0.5?"H":"V";
      let row=Math.floor(Math.random()*size);
      let col=Math.floor(Math.random()*size);
      if(dir==="H" && col+word.length<=size){
        if(grid[row].slice(col,col+word.length).every(cell=>cell===null)){
          for(let i=0;i<word.length;i++) grid[row][col+i]=word[i];
          return true;
        }
      }
      if(dir==="V" && row+word.length<=size){
        let ok=true;
        for(let i=0;i<word.length;i++) if(grid[row+i][col]!==null) ok=false;
        if(ok){ for(let i=0;i<word.length;i++) grid[row+i][col]=word[i]; return true; }
      }
    }
    return false;
  }

  words.forEach(w=>tryPlace(w));
  for(let r=0;r<size;r++)for(let c=0;c<size;c++) if(!grid[r][c]) grid[r][c]=String.fromCharCode(65+Math.floor(Math.random()*26));
  return grid;
}

// ---- Scoreboard ----
function renderScoreboard(){
  const sb=document.getElementById("scoreboard");
  sb.innerHTML="";
  teamData.forEach(t=>{
    const div=document.createElement("div");
    div.className="score";
    div.id=`${t.name}-score`;
    div.innerHTML=`${t.name}: <span>${t.score}</span>`;
    sb.appendChild(div);
  });
}
function updateScore(team){
  team.score++;
  document.querySelector(`#${team.name}-score span`).textContent=team.score;
}

// ---- Rendering ----
function renderGame(){
  renderScoreboard();
  const container=document.getElementById("gameContainer");
  teamData.forEach(team=>{
    const div=document.createElement("div"); div.className="team";
    div.innerHTML=`<h2>${team.name}</h2><div class="timer" id="${team.name}-timer">07:00</div>`;
    let grid=generateGrid(team.words,12);

    const g=document.createElement("div"); g.className="grid";
    grid.forEach((row,r)=>row.forEach((cell,c)=>{
      let d=document.createElement("div"); 
      d.className="cell"; d.textContent=cell; 
      d.dataset.row=r; d.dataset.col=c; 
      g.appendChild(d);
    }));

    const q=document.createElement("div"); q.className="questions";
    team.questions.forEach((qst,i)=>{ q.innerHTML+=`<div id="${team.name}-q${i}">${i+1}. ${qst}</div>`; });

    div.appendChild(g); div.appendChild(q); container.appendChild(div);

    enableSelection(g,team,div);
    startTimer(team.name,div);
  });
}

// ---- Word Selection Logic ----
function enableSelection(gridEl, team, teamDiv){
  let selecting=false, selectedCells=[];
  gridEl.addEventListener("mousedown",e=>{
    if(e.target.classList.contains("cell")){
      selecting=true; selectedCells=[e.target]; e.target.classList.add("selected");
    }
  });
  gridEl.addEventListener("mouseover",e=>{
    if(selecting && e.target.classList.contains("cell") && !selectedCells.includes(e.target)){
      selectedCells.push(e.target); e.target.classList.add("selected");
    }
  });
  window.addEventListener("mouseup",()=>{
    if(selecting){
      let word=selectedCells.map(c=>c.textContent).join("");
      let rev=selectedCells.map(c=>c.textContent).reverse().join("");
      if(team.words.includes(word)||team.words.includes(rev)){
        selectedCells.forEach(c=>c.classList.add("found"));
        let idx=team.words.indexOf(word);
        if(idx===-1) idx=team.words.indexOf(rev);
        if(idx>=0){ 
          document.getElementById(`${team.name}-q${idx}`).classList.add("done"); 
          updateScore(team);
        }
      }
      selectedCells.forEach(c=>c.classList.remove("selected"));
      selectedCells=[]; selecting=false;
    }
  });
}

// ---- Timer ----
function startTimer(teamName, teamDiv){
  let duration=7*60; // 7 minutes
  const display=document.getElementById(`${teamName}-timer`);
  const interval=setInterval(()=>{
    let minutes=Math.floor(duration/60);
    let seconds=duration%60;
    display.textContent=`${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}`;
    if(duration<=0){
      clearInterval(interval);
      teamDiv.classList.add("disabled");
      display.textContent="⏳ Time's Up!";
      display.classList.add("timeup");
    }
    duration--;
  },1000);
}

renderGame();
</script>
</body>
</html>
